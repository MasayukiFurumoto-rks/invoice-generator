<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.dao.UserDao">
	<select id="findById" resultType="com.example.entity.User">
		SELECT
		*
		FROM
		users
		WHERE
		id = #{id}
	</select>
	<select id="findByEmail" resultType="com.example.entity.User">
		SELECT
		*
		FROM
		users
		WHERE
		email= #{email}
	</select>
	<select id="findByEmailAsJoin" resultType="com.example.entity.User">
		SELECT
		u.id,
		u.name,
		u.email,
		u.password,
		u.is_administrator,
		u.deleted,
		u.user_companies_id,
		uc.name AS belongs
		FROM
		users AS u
		LEFT JOIN user_companies AS uc 
		ON u.user_companies_id = uc.id 
		WHERE
		email= #{email}
	</select>
	<insert id="insertUser" useGeneratedKeys="true" keyProperty="id">
		insert into users (name,email,password,user_companies_id)
		values (#{name},#{email},#{password},#{userCompaniesId})
	</insert>

</mapper>